pull_requests:
  do_not_increment_build_number: true

cache:
  - node_modules -> package.json
  - '%APPDATA%\npm-cache -> package.json'

branches:
  only:
  - master
  - develop

install:
  - ps: Install-Product node 8.10.0 x64

build_script: npm install

test_script:
  - npm run lint
  - npm run test
  - npm run package

deploy:
  provider: GitHub
  auth_token:
    secure: 'wVuEFe8aedCSPeg261afek1xyAYb67Ep76jsUtiPaAf07LHbyQzG9ZqF11mElmqC'
  artifact: /.*\.exe/
  on:
    branch: master
    appveyor_repo_tag: true

environment:
  GH_TOKEN:
    secure: 'wVuEFe8aedCSPeg261afek1xyAYb67Ep76jsUtiPaAf07LHbyQzG9ZqF11mElmqC'
  APPVEYOR_SAVE_CACHE_ON_ERROR: true
